/*
 boxplus mouse-over image caption engine
 @author  Levente Hunyadi
 @version 1.3.4
 @remarks Copyright (C) 2009-2010 Levente Hunyadi
 @remarks Licensed under GNU/GPLv3, see http://www.gnu.org/licenses/gpl-3.0.html
 @see     http://hunyadi.info.hu/projects/boxplus
*/
if(typeof __jQuery__=="undefined")var __jQuery__=jQuery;
(function(b){function l(a){a=a.parent("a");return a.size()?a.attr("href"):false}function m(a){return a.attr("alt")}b.fn.boxplusCaption=function(a){a=b.extend({position:"overlay",download:l,caption:m,metadata:false,dialog:false},a);a=b.extend({alwaysOnTop:a.position=="figure"},a);var c=this,d=a.caption(c),e=a.download,f=a.metadata,g=a.dialog,h=e&&e(c);e=f&&f(c);f=h||e;if(!d&&!f)return this;var n=a.position=="figure",o=c.parent("a").size()?c.parent():c,i=b('<div class="boxplus-container" />').insertAfter(o),
j=b('<div class="boxplus-imagecaption boxplus-hidden"></div>').addClass(n?"boxplus-figurecaption":"boxplus-overlaycaption").appendTo(i).html(d);if(f){d=b('<div class="boxplus-buttons" />');h&&b('<div class="boxplus-download" />').appendTo(d).click(function(){window.location.href=h;return false});e&&g&&g(b('<div class="boxplus-metadata" />').appendTo(d),c);j.append(d)}g=i.parent().mouseenter(function(){var k=c.offset();i.css({width:c.outerWidth(),height:c.outerHeight()}).offset(k).offset(k);j.removeClass("boxplus-hidden")});
a.alwaysOnTop||g.mouseleave(function(){j.addClass("boxplus-hidden")});g.mouseenter().mouseleave();return this};b.fn.boxplusCaptionGallery=function(a){b("li img:first-child",this).each(function(){b(this).boxplusCaption(a)});return this}})(__jQuery__);
