/*

 Slimbox v1.71 - The ultimate lightweight Lightbox clone
 (c) 2007-2009 Christophe Beyls <http://www.digitalia.be>
 MIT-style license.
*/
var Slimbox=function(){function u(){var a=k.getScroll(),b=k.getSize();$$(d,l).setStyle("left",a.x+b.x/2);D&&i.setStyles({left:a.x,top:a.y,width:b.x,height:b.y})}function E(a){["object",F?"select":"embed"].forEach(function(b){Array.forEach(document.getElementsByTagName(b),function(b){if(a)b._slimbox=b.style.visibility;b.style.visibility=a?"hidden":b._slimbox})});i.style.display=a?"":"none";var b=a?"addEvent":"removeEvent";k[b]("scroll",u)[b]("resize",u);document[b]("keydown",N)}function N(a){a=a.code;
return c.closeKeys.contains(a)?w():c.nextKeys.contains(a)?G():c.previousKeys.contains(a)?H():!1}function H(){return x(m)}function G(){return x(n)}function x(a){if(a>=0)f=a,q=e[a][0],m=(f||(c.loop?e.length:0))-1,n=(f+1)%e.length||(c.loop?0:-1),I(),d.className="lbLoading",j=new Image,j.onload=O,j.src=q;return!1}function O(){d.className="";r.set(0);o.setStyles({backgroundImage:"url("+q+")",display:""});y.setStyle("width",j.width);$$(y,s,t).setStyle("height",j.height);J.set("html",e[f][1]||"");K.set("html",
(e.length>1&&c.counterText||"").replace(/{x}/,f+1).replace(/{y}/,e.length));if(m>=0)L.src=e[m][0];if(n>=0)M.src=e[n][0];g=o.offsetWidth;h=o.offsetHeight;var a=Math.max(0,z-h/2),b=0,v;d.offsetHeight!=h&&(b=p.start({height:h,top:a}));d.offsetWidth!=g&&(b=p.start({width:g,marginLeft:-g/2}));v=function(){l.setStyles({width:g,top:a+h,marginLeft:-g/2,visibility:"hidden",display:""});r.start(1)};b?p.chain(v):v()}function P(){if(m>=0)s.style.display="";if(n>=0)t.style.display="";A.set(-B.offsetHeight).start(0);
l.style.visibility=""}function I(){j.onload=$empty;j.src=L.src=M.src=q;p.cancel();r.cancel();A.cancel();$$(s,t,o,l).setStyle("display","none")}function w(){if(f>=0)I(),f=m=n=-1,d.style.display="none",C.cancel().chain(E).start(0);return!1}var k=window,F=Browser.Engine.trident4,c,e,f=-1,q,m,n,D,z,g,h,j={},L=new Image,M=new Image,i,d,o,y,s,t,l,B,J,K,C,p,r,A;k.addEvent("domready",function(){$(document.body).adopt($$(i=new Element("div",{id:"lbOverlay",events:{click:w}}),d=new Element("div",{id:"lbCenter"}),
l=new Element("div",{id:"lbBottomContainer"})).setStyle("display","none"));o=(new Element("div",{id:"lbImage"})).injectInside(d).adopt(y=(new Element("div",{styles:{position:"relative"}})).adopt(s=new Element("a",{id:"lbPrevLink",href:"#",events:{click:H}}),t=new Element("a",{id:"lbNextLink",href:"#",events:{click:G}})));B=(new Element("div",{id:"lbBottom"})).injectInside(l).adopt(new Element("a",{id:"lbCloseLink",href:"#",events:{click:w}}),J=new Element("div",{id:"lbCaption"}),K=new Element("div",
{id:"lbNumber"}),new Element("div",{styles:{clear:"both"}}))});Element.implement({slimbox:function(a,b){$$(this).slimbox(a,b);return this}});Elements.implement({slimbox:function(a,b,c){b=b||function(a){return[a.href,a.title]};c=c||function(){return!0};var d=this;d.removeEvents("click").addEvent("click",function(){var e=d.filter(c,this);return Slimbox.open(e.map(b),e.indexOf(this),a)});return d}});return{open:function(a,b,f){c=$extend({loop:!1,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,
resizeTransition:!1,initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"{x}/{y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},f||{});C=new Fx.Tween(i,{property:"opacity",duration:c.overlayFadeDuration});p=new Fx.Morph(d,$extend({duration:c.resizeDuration,link:"chain"},c.resizeTransition?{transition:c.resizeTransition}:{}));r=new Fx.Tween(o,{property:"opacity",duration:c.imageFadeDuration,onComplete:P});A=new Fx.Tween(B,{property:"margin-top",
duration:c.captionAnimationDuration});typeof a=="string"&&(a=[[a,b]],b=0);z=k.getScrollTop()+k.getHeight()/2;g=c.initialWidth;h=c.initialHeight;d.setStyles({top:Math.max(0,z-h/2),width:g,height:h,marginLeft:-g/2,display:""});if(D=F||i.currentStyle&&i.currentStyle.position!="fixed")i.style.position="absolute";C.set(0).start(c.overlayOpacity);u();E(1);e=a;c.loop=c.loop&&e.length>1;return x(b)}}}();
